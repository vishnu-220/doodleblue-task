/*global module*/

function PrettyLayout() {
    var self = this;
    self.headers = [];
    self.rows = [];
    self.maxColumnWidth = [];
    self.space = "  ";
}

PrettyLayout.prototype.header = function (columnHeaders) {
    var i,
        self = this;
    if (columnHeaders) {
        for (i = 0; i < columnHeaders.length; i = i + 1) {
            self.headers.push(self.normalize(columnHeaders[i]));
            self.maxColumnWidth.push(self.normalize(columnHeaders[i]).length);
        }
    }
};

PrettyLayout.prototype.row = function (oneRow) {
    var i,
        self = this,
        thisRow = [];
    if (oneRow) {
        for (i = 0; i < oneRow.length; i = i + 1) {
            // additional columns beyond the number of headers will be ignored
            if (i < self.headers.length) {
                thisRow.push(self.normalize(oneRow[i]));
                if (self.normalize(oneRow[i]).toString().length > self.maxColumnWidth[i]) {
                    self.maxColumnWidth[i] = self.normalize(oneRow[i]).toString().length;
                }
            }
        }
        self.rows.push(thisRow);
    }
};

PrettyLayout.prototype.paint = function () {
    var i,
        j,
        self = this,
        printString,
        stringDashes = function (numberDashes) {
            var i,
                printString = '';
            for (i = 0; i < numberDashes; i = i + 1) {
                printString = printString + '-';
            }
            return printString;
        },
        stringPadded = function (content, lengthContent) {
            var i,
                printString;
            printString = self.normalize(content);
            for (i = 0; i < lengthContent - self.normalize(content).toString().length; i = i + 1) {
                printString = printString + " ";
            }
            return printString;
        };
    printString = "";
    for (i = 0; i < self.headers.length; i = i + 1) {
        printString = printString + stringPadded(self.headers[i], self.maxColumnWidth[i]) + self.space;
    }
    console.log(printString);
    printString = "";
    for (i = 0; i < self.maxColumnWidth.length; i = i + 1) {
        printString = printString + stringDashes(self.maxColumnWidth[i]) + self.space;
    }
    console.log(printString);
    printString = "";
    for (j = 0; j < self.rows.length; j = j + 1) {
        for (i = 0; i < self.rows[j].length; i = i + 1) {
            printString = printString + stringPadded(self.rows[j][i], self.maxColumnWidth[i]) + self.space;
        }
        console.log(printString);
        printString = "";
    }
};

PrettyLayout.prototype.normalize = function (value) {
    if (value === null) {
        return "null";
    } else if (value === undefined) {
        return "undefined";
    } else {
        return value;
    }
};

module.exports = new PrettyLayout();