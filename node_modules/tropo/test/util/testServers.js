var http = require('http');

var TestServers = function() {};

TestServers.prototype.start = function() {
    if (!this.started) {

        this.server503 = http.createServer(function (req, res) {
            res.writeHead(503, {});
            res.end();
        });
        this.server503.listen(62001);

        this.serverLazy = http.createServer(function (req, res) {
            //res.end();
        });
        this.serverLazy.listen(62002);

        this.server404 = http.createServer(function (req, res) {
            res.writeHead(404, {});
            res.end();
        });
        this.server404.listen(62003);
        
        this.started = true;
    } else {
        console.log('Test servers already started. Ignoring start call');
    }
}

TestServers.prototype.end = function() {

    this.started = false;
	this.server404.close();
	this.server503.close();
	this.serverLazy.close();
}

exports.TestServers = new TestServers();